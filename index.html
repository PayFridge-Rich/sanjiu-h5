<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, aspect-ratio=160/313">
    <title>ä¸‰ä¹èƒƒæ³°å…»èƒƒèˆ’äº’åŠ¨H5</title>
    <style>
        @font-face {
            font-family: 'SourceHanSansCN-Medium';
            src: url('assets/Fonts/SourceHanSansCN-Medium.otf') format('opentype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'YanShiXieHei';
            src: url('assets/Fonts/æ¼”ç¤ºæ–œé»‘ä½“.otf') format('opentype');
            font-weight: normal;
            font-style: normal;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'SourceHanSansCN-Medium', sans-serif;
        }
        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #f0f0ef;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        .loader-logo {
            max-width: 300px;
            margin-bottom: 20px;
        }
        .progress-bar {
            width: 80%;
            max-width: 400px;
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
        }
        .progress {
            width: 0%;
            height: 100%;
            background: #11458c;
            transition: width 0.3s ease;
        }
        body {
            min-height: 100vh;
            background: url("assets/img/èƒŒæ™¯.png") no-repeat center/cover;
            overflow: hidden;
        }
        .container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100vh;
        }
        .character {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            height: 100vh;
            object-fit: contain;
            filter: drop-shadow(0 -2px 10px rgba(0, 0, 0, 0.178));
        }
        #dialog5 {
            background: none;
            padding: 0;
            border-radius: 0;
            box-shadow: none;
            color: #d24b4b;
            font-family: 'YanShiXieHei', sans-serif;
            font-size: 48px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            text-shadow:
            1px 0 0 white,
            -1px 0 0 white,
            0 1px 0 white,
            0 -1px 0 white,
            2px 0 0 white,
            -2px 0 0 white,
            0 2px 0 white,
            0 -2px 0 white,
            3px 0 0 white,
            -3px 0 0 white,
            0 3px 0 white,
            0 -3px 0 white,
            4px 0 0 white,
            -4px 0 0 white,
            0 4px 0 white,
            0 -4px 0 white,
            5px 0 0 white,
            -5px 0 0 white,
            0 5px 0 white,
            0 -5px 0 white;
            transform: translateX(-50%) rotate(-12deg);
        }
        #dialog6 {
            background: none;
            padding: 0;
            border-radius: 0;
            box-shadow: none;
            color: #d24b4b;
            font-family: 'YanShiXieHei', sans-serif;
            font-size: 48px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            text-shadow:
            1px 0 0 white,
            -1px 0 0 white,
            0 1px 0 white,
            0 -1px 0 white,
            2px 0 0 white,
            -2px 0 0 white,
            0 2px 0 white,
            0 -2px 0 white,
            3px 0 0 white,
            -3px 0 0 white,
            0 3px 0 white,
            0 -3px 0 white,
            4px 0 0 white,
            -4px 0 0 white,
            0 4px 0 white,
            0 -4px 0 white,
            5px 0 0 white,
            -5px 0 0 white,
            0 5px 0 white,
            0 -5px 0 white;
            transform: translateX(-50%) rotate(-12deg);
        }
        .dialog {
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #ffffffcc 0%, #ffffffcc 100%);
            padding: 10px 20px;
            border-radius: 17px;
            animation: drop 0.3s forwards;
            min-width: 100px;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1); /* å¯¹è¯æ¡†é˜´å½± */
        }
        .bubble {
            position: absolute;
            width: 80px;
            height: 80px;
            background: rgba(255,255,255,0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            animation: shake 1s infinite;
            cursor: pointer;
        }
            .bubble:hover {
                transform: translateX(-50%) scale(1.05);
                background: rgba(255, 255, 255, 0.664);
                box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            }
            .bubble {
                box-shadow: 0 2px 5px rgba(0,0,0,0.15);
                transition: all 0.3s;
            }
            .bubble-1 { width: 80px; height: 80px; animation: shake 0.8s infinite; }
            .bubble-2 { width: 90px; height: 90px; animation: shake 1s infinite; }
            .bubble-3 { width: 70px; height: 70px; animation: shake 1.2s infinite; }
        .button {
            position: absolute;
            bottom: -80vh;
            left: 50%;
            transform: translateX(-50%);
            padding: 20px 35px;
            background: url('assets/img/æŒ‰é’®_å¸¸æ€.png') no-repeat center/cover;
            color: white;
            border: none;
            border-radius: 24px;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        .button:active { 
            background: url('assets/img/æŒ‰é’®_æŒ‰ä¸‹.png') no-repeat center/cover;
        }
        .flame {
            position: absolute;
            top: 52%;
            left: 52%;
            transform: translate(-50%, -50%);
            width: 50px;
            animation: flame 1.5s infinite;
        }
        .game-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            padding: 20px;
            max-width: 400px;
            margin: 20vh auto 0;
        }
        .tray {
            position: absolute;
            top: 43.5%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 85%;
            height: auto;
            filter: drop-shadow(0 -2px 10px rgba(0, 0, 0, 0.16));
            z-index: 0;
        }

        @font-face {
            font-family: 'DemoSlantedBlack';
            src: url('assets/Fonts/æ¼”ç¤ºæ–œé»‘ä½“.otf') format('opentype');
        }

        .timer-img {
            position: absolute;
            top: 15.5%;
            left: 12%; /* ä¸æ‰˜ç›˜å·¦å¯¹é½ï¼ˆ70%å®½åº¦çš„æ‰˜ç›˜å·¦è¾¹ç¼˜ä¸º15%ï¼‰ */
            width: 20%;
            z-index: 1;
        }

        .timer-text {
            position: absolute;
            top: 14.9%;
            left: 22.5%; /* è®¡æ—¶å™¨å›¾ç‰‡ä¸­å¿ƒä½ç½® */
            transform: translateX(-50%);
            font-family: 'DemoSlantedBlack';
            color: white;
            font-size: 32px;
            z-index: 2;
        }
        .card {
            aspect-ratio: 1/1;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }
        .card-front,
        .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .card-back {
            background: #f0f0ef url("assets/img/ä¸‰ä¹èƒƒæ³°ç‰Œå…»èƒƒèˆ’å“ç‰Œlogo.png") no-repeat center/70%;
            transform: rotateY(0deg);
        }
        .card-front {
            background: #f0f0ef;
            transform: rotateY(180deg);
            background-size: 80%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .flipped {
            transform: rotateY(180deg);
        }
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #ffffff 90%, #fff5f5 100%); /* æŸ”å’Œæ¸å˜èƒŒæ™¯ */
            padding: 2rem 2.5rem;
            border-radius: 24px; /* æ›´å¤§åœ†è§’ */
            box-shadow: 0 8px 24px rgba(210, 75, 75, 0.15); /* çº¢è‰²è°ƒæŸ”å’Œé˜´å½± */
            text-align: center;
            max-width: 28rem;
            width: calc(100% - 2rem);
            margin: 0 1rem;
            font-family: 'SourceHanSansCN-Medium', sans-serif; /* ä½¿ç”¨é¡¹ç›®å­—ä½“ */
        }
        .popup h3 {
            color: #d24b4b;
            font-size: 1.5rem;
            margin-bottom: 1.2rem;
            font-weight: 600;
        }
        .popup ul {
            text-align: left;
            margin: 0 1rem;
        }
        .popup li {
            color: #333;
            line-height: 1.6;
            margin-bottom: 0.8rem;
            display: flex;
            align-items: flex-start;
        }
        .popup li i {
            color: #d24b4b;
            margin-right: 0.6rem;
            font-size: 1.1rem;
            margin-top: 0.2rem;
        }
        .popup-btn {
            display: block;
            margin: 1.5rem auto 0;
            padding: 20px 60px;
            background: url('assets/img/æŒ‰é’®_å¸¸æ€.png') no-repeat center/cover;
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .popup-btn:active {
            background: url('assets/img/æŒ‰é’®_æŒ‰ä¸‹.png') no-repeat center/cover;
        }
        @keyframes drop {
            to { top: 15vh; }
        }
        @keyframes shake {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes flame {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.1); }
        }
    </style>
</head>
<body>
        <!-- åŠ è½½é¡µ -->
        <div id="loader">
            <img src="assets/img/ä¸‰ä¹èƒƒæ³°ç‰Œå…»èƒƒèˆ’å“ç‰Œlogo.png" alt="å“ç‰Œlogo" class="loader-logo">
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
        </div>
    <div class="container" id="page1">
        <img src="assets/img/äººç‰©_å˜´é¦‹çŠ¶æ€.png" class="character" alt="å˜´é¦‹çŠ¶æ€">
        <div class="dialog" id="dialog1">é¥¿äº†~~~</div>
        <div class="dialog" id="dialog2">æç‚¹ä¸œè¥¿åƒåƒå§~</div>
    </div>

    <div class="container" id="page1-1" style="display: none;">
        <img src="assets/img/äººç‰©_å˜´é¦‹çŠ¶æ€.png" class="character" alt="å˜´é¦‹çŠ¶æ€">
    </div>

    <div class="container" id="page1-2" style="display: none;">
        <img src="assets/img/äººç‰©_èƒƒç—›çŠ¶æ€.png" class="character" alt="èƒƒç—›çŠ¶æ€">
        <div class="dialog" id="dialog3">ä¹±åƒä¸œè¥¿å¯¼è‡´èƒƒç—›ï¼Ÿ</div>
        <button class="button" id="checkBtn">æŸ¥çœ‹èƒƒéƒ¨çŠ¶æ€</button>
    </div>

    <div class="container" id="page2" style="display: none;">
        <img src="assets/img/äººç‰©_èƒƒéƒ¨é€è§†.png" class="character">
        <img src="assets/img/ç«è‹—.png" class="flame" alt="ç«è‹—">
        <div class="dialog" id="dialog4">ä¸è‰¯é¥®é£Ÿä¹ æƒ¯å¯¼è‡´èƒƒéƒ¨ä¸é€‚</div>
        <button class="button" id="startGameBtn">å†²è¢‹å…»èƒƒèˆ’å§</button>
    </div>

    <div class="container" id="page2-1" style="display: none;">
        <img src="assets/img/äººç‰©_æŒå…»èƒƒèˆ’.png" class="character" alt="æŒå…»èƒƒèˆ’äººç‰©">
        <button class="button" id="ruleBtn">çœ‹çœ‹æ¸¸æˆè§„åˆ™</button>
    </div>

    <!-- è§„åˆ™å¼¹çª— -->
    <div id="page3" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden" style="display: none;">
        <img src="assets/img/äººç‰©_æŒå…»èƒƒèˆ’.png" class="character">
        <div class="popup">
            <h3 class="text-xl font-bold text-center mb-4">æ¸¸æˆè§„åˆ™</h3>
            <ul class="space-y-3 mb-6">
                <li class="flex items-start">
                    <span>ç¿»ç‰Œæ‰¾å‡ºæ‰€æœ‰åŒ¹é…çš„å›¾æ¡ˆ</span>
                </li>
                <li class="flex items-start">
                    <span>æ¯æ¬¡å¯ä»¥ç¿»ä¸¤å¼ ç‰Œ</span>
                </li>
                <li class="flex items-start">
                    <span>å¦‚æœä¸¤å¼ ç‰ŒåŒ¹é…ï¼Œå®ƒä»¬ä¼šä¿æŒç¿»å¼€çŠ¶æ€</span>
                </li>
                    <span>æˆåŠŸé…å¯¹æ‰€æœ‰å¡ç‰‡å³å¯æ¶ˆé™¤èƒƒéƒ¨ä¸é€‚</span>
                </li>
            </ul>
            <button id="startBtn" class="popup-btn">
                æˆ‘çŸ¥é“å•¦
            </button>
        </div>
    </div>

    <div class="container" id="page4" style="display: none;">
        <img src="assets/img/äººç‰©_æŒå…»èƒƒèˆ’.png" class="character">
        <img src="assets/img/å¡ç‰Œæ¸¸æˆ_æ‰˜ç›˜.png" class="tray" alt="æ‰˜ç›˜">
        <img src="assets/img/æ¸¸æˆ_è®¡æ—¶å™¨.png" class="timer-img" alt="è®¡æ—¶å™¨">
        <div class="timer-text" id="timer">40</div>
        <div class="game-grid" id="gameGrid"></div>
    </div>

    <div class="container" id="page5" style="display: none;">
        <img src="assets/img/äººç‰©_èƒƒç—›ç¼“è§£.png" class="character" alt="èƒƒç—›ç¼“è§£">
        <div class="dialog" id="dialog5">åƒé¦™å–è¾£
            "èƒƒ"ä½ æ’‘è…°</div>
        <button class="button" id="replayBtn">æˆ‘æƒ³å†ç©ä¸€æ¬¡</button>
    </div>

    <div class="container" id="page6" style="display: none;">
        <img src="assets/img/äººç‰©_å¼€è¢‹å¤±è´¥.png" class="character" alt="å¼€è¢‹å¤±è´¥äººç‰©">
        <div class="dialog" id="dialog6">å•Šå•Š
            æ’’äº†å•¦TAT</div>
        <button class="button" id="retryBtn">å†æ‰“å¼€ä¸€è¢‹å§</button>
    </div>

    <script>
        // åŠ è½½é¡µé€»è¾‘
        document.addEventListener('DOMContentLoaded', () => {
            const loader = document.getElementById('loader');
            const progress = document.getElementById('progress');
            let currentProgress = 0;

            const simulateLoading = () => {
                const interval = setInterval(() => {
                    currentProgress += Math.random() * 20;
                    if (currentProgress >= 100) {
                        currentProgress = 100;
                        clearInterval(interval);
                        loader.style.display = 'none';
                        showPage('page1');
                        showPage1Dialogs(); // åŠ è½½å®Œæˆåè§¦å‘å¯¹è¯æ¡†æ˜¾ç¤º
                    }
                    progress.style.width = `${currentProgress}%`;
                }, 200);
            };

            simulateLoading();
        });

        // é¡µé¢åˆ‡æ¢æ§åˆ¶
        const pages = {
            page1: document.getElementById('page1'),
            'page1-1': document.getElementById('page1-1'),
            'page1-2': document.getElementById('page1-2'),
            page2: document.getElementById('page2'),
            'page2-1': document.getElementById('page2-1'),
            page3: document.getElementById('page3'),
            page4: document.getElementById('page4'),
            page5: document.getElementById('page5'),
            page6: document.getElementById('page6')
        };

        function showPage(pageName) {
            Object.values(pages).forEach(p => p.style.display = 'none');
            pages[pageName].style.display = 'block';
        }

        // Page1 å¯¹è¯æ¡†é¡ºåºæ˜¾ç¤ºé€»è¾‘ï¼ˆç§»è‡³åŠ è½½é¡µå®Œæˆåæ‰§è¡Œï¼‰
        function showPage1Dialogs() {
            const dialog1 = document.getElementById('dialog1');
            const dialog2 = document.getElementById('dialog2');
            dialog1.style.display = 'none';
            dialog2.style.display = 'none';

            // ç¬¬ä¸€ä¸ªå¯¹è¯æ¡†æ˜¾ç¤º
            setTimeout(() => {
                dialog1.style.display = 'block';
                dialog1.style.left = '50%';
                dialog1.style.animation = 'drop 0.5s forwards';
                // 2ç§’åæ¶ˆå¤±
                setTimeout(() => {
                    dialog1.style.display = 'none';
                    // ç¬¬äºŒä¸ªå¯¹è¯æ¡†æ˜¾ç¤º
                    setTimeout(() => {
                        dialog2.style.display = 'block';
                        dialog2.style.left = '50%';
                        dialog2.style.animation = 'drop 0.5s forwards';
                        // 2ç§’åæ¶ˆå¤±å¹¶è¿›å…¥ä¸‹ä¸€é¡µ
                        setTimeout(() => {
                            dialog2.style.display = 'none';
                            showPage('page1-1');
                        }, 2000);
                    }, 100);
                }, 1500);
            }, 100);
        }

        // Page1-1 æ°”æ³¡äº¤äº’
        const bubblePositions = [
            { top: '20%', left: '15%' },
            { top: '10%', left: '30%' },
            { top: '12%', left: '53%' }
        ];
        const foods = ['ğŸ”', 'ğŸŒ¶ï¸', 'ğŸ§‹'];
        let popped = 0;

        bubblePositions.forEach((pos, i) => {
            const bubble = document.createElement('div');
            bubble.className = `bubble bubble-${i+1}`; // åº”ç”¨ä¸åŒå°ºå¯¸å’ŒåŠ¨ç”»çš„ç±»
            bubble.style.top = pos.top;
            bubble.style.left = pos.left;
            bubble.textContent = foods[i];
            bubble.addEventListener('click', () => {
                bubble.style.animation = 'none';
                bubble.style.transform = 'scale(0)';
                popped++;
                if (popped === 3) {
                    setTimeout(() => showPage('page1-2'), 500);
                }
            });
            pages['page1-1'].appendChild(bubble);
        });

        // Page1-2 æŒ‰é’®ç‚¹å‡»
        document.getElementById('checkBtn').addEventListener('click', () => {
            document.getElementById('dialog3').style.display = 'none';
            showPage('page2');
        });

        // Page2 æŒ‰é’®ç‚¹å‡»
        document.getElementById('startGameBtn').addEventListener('click', () => showPage('page2-1'));

        // Page2-1 è§„åˆ™æŒ‰é’®ç‚¹å‡»
        document.getElementById('ruleBtn').addEventListener('click', () => showPage('page3'));

        // Page3 å¼€å§‹æ¸¸æˆ
        document.getElementById('startBtn').addEventListener('click', () => {
            showPage('page4');
            initGame();
        });

        // æ¸¸æˆåˆå§‹åŒ–
        let timerInterval;

        function startTimer() {
            let timeLeft = 40;
            const timerElement = document.getElementById('timer');
            timerElement.textContent = timeLeft;
            timerInterval = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    showPage('page6');
                }
            }, 1000);
        }

        function initGame() {
            const cardImages = [
                'assets/img/å¡ç‰‡/å…šå‚.png',
                'assets/img/å¡ç‰‡/åŒ—æ²™å‚.png',
                'assets/img/å¡ç‰‡/å±±æ¥‚.png',
                'assets/img/å¡ç‰‡/å±±è¯.png',
                'assets/img/å¡ç‰‡/å¹²å§œ.png',
                'assets/img/å¡ç‰‡/ç™½æœ¯.png',
                'assets/img/å¡ç‰‡/é™ˆçš®.png',
                'assets/img/å¡ç‰‡/é»„ç²¾.png'
            ];
            const allCards = [...cardImages, ...cardImages];
            allCards.sort(() => 0.5 - Math.random());

            const gameGrid = document.getElementById('gameGrid');
            gameGrid.innerHTML = '';

            let flippedCards = [];
            let lockBoard = false;

            allCards.forEach(img => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="card-back"></div>
                    <div class="card-front" style="background-image: url('${img}')"></div>
                `;

                card.addEventListener('click', () => {
                    if (lockBoard || flippedCards.includes(card) || card.classList.contains('flipped')) return;
                    card.classList.add('flipped');
                    flippedCards.push(card);

                    if (flippedCards.length === 2) {
                        lockBoard = true;
                        checkMatch();
                    }
                });
                gameGrid.appendChild(card);
            });

            // å±•ç¤ºæ‰€æœ‰å¡é¢3ç§’
            Array.from(gameGrid.children).forEach(card => card.classList.add('flipped'));
            lockBoard = true; // é”å®šæ£‹ç›˜é˜²æ­¢ç‚¹å‡»
            setTimeout(() => {
                Array.from(gameGrid.children).forEach(card => card.classList.remove('flipped'));
                lockBoard = false;
                startTimer(); // 3ç§’å±•ç¤ºç»“æŸåå¯åŠ¨å€’è®¡æ—¶
            }, 3000);

            function checkMatch() {
                const [card1, card2] = flippedCards;
                const img1 = card1.querySelector('.card-front').style.backgroundImage;
                const img2 = card2.querySelector('.card-front').style.backgroundImage;

                if (img1 === img2) {
                    flippedCards = [];
                    lockBoard = false;
                    checkWin();
                } else {
                    setTimeout(() => {
                        card1.classList.remove('flipped');
                        card2.classList.remove('flipped');
                        flippedCards = [];
                        lockBoard = false;
                    }, 1000);
                }
            }

            function checkWin() {
                const allFlipped = Array.from(gameGrid.children).every(c => c.classList.contains('flipped'));
                if (allFlipped) {
                    clearInterval(timerInterval); // å…³é”®ä¿®å¤ï¼šèƒœåˆ©æ—¶åœæ­¢è®¡æ—¶
                    setTimeout(() => showPage('page5'), 1000);
                }
            }
        }

        // Page5 å†ç©ä¸€æ¬¡
        document.getElementById('replayBtn').addEventListener('click', () => showPage('page3'));

        document.getElementById('retryBtn').addEventListener('click', () => {
            clearInterval(timerInterval);
            showPage('page3');
        });
    </script>
</body>
</html>
